{{define "base"}}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PMO - {{block "title" .}}{{end}}</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=article_shortcut,calendar_check,home,person,running_with_errors,tonality" />
    <link rel="stylesheet" href="/static/bootstrap.min.css" />
    <script src="/static/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", (event) => {
            const htmlElement = document.documentElement;
            const switchElement = document.getElementById("darkModeSwitch");

            // Set the default theme to dark if no setting is found in local storage
            const currentTheme = localStorage.getItem("bsTheme") || "dark";
            htmlElement.setAttribute("data-bs-theme", currentTheme);
            switchElement.checked = currentTheme === "dark";

            switchElement.addEventListener("change", function () {
                if (this.checked) {
                    htmlElement.setAttribute("data-bs-theme", "dark");
                    localStorage.setItem("bsTheme", "dark");
                } else {
                    htmlElement.setAttribute("data-bs-theme", "light");
                    localStorage.setItem("bsTheme", "light");
                }
            });
        });
    </script>
    {{block "head" .}}{{end}}
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-primary mb-3" data-bs-theme="dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <span class="material-symbols-outlined">
                    home
                </span>
            </a>
            <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="navbarColor01">
                <ul class="navbar-nav me-auto">
                    {{$activePage := .ActivePage}}
                    {{if not $activePage}}{{$activePage = "records"}}{{end}}

                    {{$navItems := slice
                      (slice "/" "index" "Landing")
                      (slice "/events" "events" "Events")
                      (slice "/players" "players" "Players")
                      (slice "/about" "about" "About")
                    }}

                    {{range $navItems}}
                        {{$href := index . 0}}
                        {{$id := index . 1}}
                        {{$caption := index . 2}}
                        <li class="nav-item">
                            {{if eq $id $activePage}}
                                <a class="nav-link active" href="{{$href}}">{{$caption}}</a>
                                <span class="visually-hidden">(current)</span>
                            {{else}}
                                <a class="nav-link" href="{{$href}}">{{$caption}}</a>
                            {{end}}
                        </li>
                    {{end}}
                </ul>
                <div class="form-check form-switch bg-primary">
                    <input class="form-check-input border-primary-subtle" type="checkbox" id="darkModeSwitch" checked />
                    <label class="form-check-label" for="darkModeSwitch">
                        <span class="material-symbols-outlined">
                            tonality
                        </span>
                    </label>
                </div>
            </div>
        </div>
    </nav>
    {{block "breadcrumbs" .}}{{end}}
    <div class="container">
        {{block "content" .}}{{end}}
    </div>
</body>
</html>
{{end}}
